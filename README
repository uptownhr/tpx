** Jien Model **

*** The query methods (where, limit, orderBy, groupBy, having) are all chainable so you can mix/match them.

// get a single record by it's primary id
$data = Jien::model("User")->get(16);

// get a single record with a where clause
$data = Jien::model("User")->where("u.username LIKE '%jae%')->get();

// get all records
$data = Jien::model("User")->getAll();

// custom selects
$data = Jien::model("User")->select("count(*) as count, u.username, u.user_id)->getAll();

// get all records and limit to 20
$data = Jien::model("User")->limit(20)->getAll();

// get all records and limit to 20 and offset by 10
$data = Jien::model("User")->limit(20, 10)->getAll();

// sort by username desc
$data = Jien::model("User")->limit(20)->orderBy('u.username desc')->getAll();

// where clause for male only
$data = Jien::model("User")->where("u.gender = 'm'")->orderBy('u.user_id asc')->getAll();

// where clause for male or female
$data = Jien::model("User")->where("u.gender = 'm' OR u.gender='f'")->getAll();

// alternatively ...
$data = Jien::model("User")->where("u.gender = 'm'")->orWhere("u.gender = 'f'")->orderBy('u.username asc')->getAll();

// get all records and where clause for male only and add a or where clause
$data = Jien::model("User")->where("u.gender = 'm'")->orWhere("u.gender = 'f'")->getAll();

// get all records and where clause for male only and add a or where clause
$data = Jien::model("User")->where("u.gender = 'm'")->orWhere("u.gender = 'f'")->getAll();

// group by gender
$data = Jien::model("User")->groupBy("u.gender")->getAll();

// group by with having
$posts = Jien::model("User")
	->leftJoin("Post p", "p.user_id = u.user_id")
	->where("p.user_id IS NOT NULL")
	->groupBy("u.gender")
	->having("u.active=1")
	->getAll();


// left join takes 2 params, 3rd optional (table and alias(optional), join condition, fields to select)
$data = Jien::model("Post")
	->select("p.subject, p.message")
	->leftJoin("User u", "u.user_id = p.user_id", "u.username, u.user_id, p.created as post_created")
	->getAll();
Jien::debug($data);

*** From the User model ***

You can create pre-defined chunks of sql to re-use / interchange easily:

public function byHuman(){
	$this->andWhere("u.gender = 'f' OR u.gender = 'm'");
	return $this;
}

.....

Now you can just:

$data = Jien::model("User")->byHuman()->byPopular()->etc..etc..->getAll();


....

Pagination:

[controller]
$current_page = $this->_getParam('page', 1);
$this->view->data = Jien::model("User")->enablePager($current_page)->getAll();

or to override defaults (defaults are item_per_page = 10, page_range = 10)

$item_per_page = 10;
$page_range = 10;
$this->view->data = Jien::model("User")->enablePager($current_page, $item_per_page, $page_range)->getAll();

[index.phtml]
<?php echo $this->paginationControl($this->data['paginator'], 'Sliding', 'pagination.phtml'); ?>